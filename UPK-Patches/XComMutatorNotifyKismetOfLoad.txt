MOD_NAME=XCOM Mutator Notify Kismet Of Load
AUTHOR=wghost81 aka Wasteland Ghost
DESCRIPTION=Inserts a Mutator call into XGBattle.Loading.NotifyKismetOfLoad function, allows to interrupt Kismet script activation on load

Version: 1.0

Compatible with XCOM Enemy Within versions:
 - all

UPK_FILE=XComGame.upk
OBJECT=XGBattle.Loading.NotifyKismetOfLoad:AUTO
ALIAS=DebugLog:19 2E <Class.XComOnlineEventMgr> 19 2E <Engine.GameEngine> 12 20 <Engine.Engine> 0A 00 <Engine.Engine.GetEngine.ReturnValue> 00 1C <Engine.Engine.GetEngine> 16 09 00 <Engine.GameEngine.OnlineEventManager> 00 01 <Engine.GameEngine.OnlineEventManager> FF 00 <NullRef> 00 1B <DevOnlineMsg>
[REPLACEMENT_CODE]
<!DebugLog> 1F <%t "XGBattle.Loading.NotifyKismetOfLoad: Processing Mutators"> 16
//if(class'Engine'.static.GetCurrentWorldInfo().Game.BaseMutator != none)
07 [@NoMutators] 77 19
19 12 20 <Engine.Engine> 0A 00 <Engine.Engine.GetCurrentWorldInfo.ReturnValue> 00 1C <Engine.Engine.GetCurrentWorldInfo> 16 09 00 <Engine.WorldInfo.Game> 00 01 <Engine.WorldInfo.Game>
09 00 <Engine.GameInfo.BaseMutator> 00 01 <Engine.GameInfo.BaseMutator>
2A 16
<!DebugLog> 1F <%t "XGBattle.Loading.NotifyKismetOfLoad: Found BaseMutator"> 16
//class'Engine'.static.GetCurrentWorldInfo().Game.BaseMutator.Mutate("XGBattle.Loading.NotifyKismetOfLoad", class'Engine'.static.GetCurrentWorldInfo().GetALocalPlayerController());
19 19
19 12 20 <Engine.Engine> 0A 00 <Engine.Engine.GetCurrentWorldInfo.ReturnValue> 00 1C <Engine.Engine.GetCurrentWorldInfo> 16 09 00 <Engine.WorldInfo.Game> 00 01 <Engine.WorldInfo.Game>
09 00 <Engine.GameInfo.BaseMutator> 00 01 <Engine.GameInfo.BaseMutator>
0A 00 <NullRef> 00 1B <Mutate>
1F <%t "XGBattle.Loading.NotifyKismetOfLoad">
19 12 20 <Engine.Engine> 0A 00 <Engine.Engine.GetCurrentWorldInfo.ReturnValue> 00 1C <Engine.Engine.GetCurrentWorldInfo> 16
0A 00 <Engine.Actor.GetALocalPlayerController.ReturnValue> 00 1C <Engine.Actor.GetALocalPlayerController> 16
16
[#NoMutators]

//WorldInfo.GetGameSequence().FindSeqObjectsByClass(class'SeqEvent_OnKismetDataSerialized', true, Events)
19 19 01 <Engine.Actor.WorldInfo>
0A 00 <Engine.WorldInfo.GetGameSequence.ReturnValue> 00 1C <Engine.WorldInfo.GetGameSequence> 16
1D 00 <NullRef> 00 1C <Engine.Sequence.FindSeqObjectsByClass>
20 <Class.SeqEvent_OnKismetDataSerialized> 27 00 <.Events> 16
//Idx = 0
0F 00 <.Idx> 25
[#loop1]
//if(Idx < Events.Length)
07 [@loop1end] 96 00 <.Idx> 36 00 <.Events> 16
//NotifyKismetEvent = SeqEvent_OnKismetDataSerialized(Events[Idx])
0F 00 <.NotifyKismetEvent> 2E <Class.SeqEvent_OnKismetDataSerialized>
10 00 <.Idx> 00 <.Events>
//NotifyKismetEvent.CheckActivate(self, self)
19 00 <.NotifyKismetEvent>
0F 00 <Engine.SequenceEvent.CheckActivate.ReturnValue> 00 1C <Engine.SequenceEvent.CheckActivate>
17 17 4A 4A 4A 16
//++ Idx
A5 00 <.Idx> 16
//goto loop1
06 [@loop1]
[#loop1end]
//return
04 0B
//EOS
53
	